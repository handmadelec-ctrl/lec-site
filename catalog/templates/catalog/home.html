{% extends "base.html" %}
{% load static %}

{% block title %}LEC | Handmade Artisan Bags{% endblock %}

{% block content %}

<section class="lec-hero">
    <div class="lec-container lec-hero-inner">
        <div class="lec-hero-left">
            <h1 class="lec-hero-title">Handcrafted Elegance, Designed to Last.</h1>
            <p class="lec-hero-subtitle">Artisan bags made with intention—where tradition meets modern sophistication.
            </p>
            <a class="lec-btn lec-btn-primary" href="{% url 'catalog' %}">View Catalog</a>
        </div>

        <div class="lec-hero-right">
            <div class="lec-hero-card">
                <h3 class="lec-hero-card-title">New arrivals</h3>
                <p class="lec-hero-card-text">Discover limited handcrafted pieces curated for everyday elegance.</p>
            </div>
        </div>
    </div>
</section>

<section class="lec-section lec-section--about">
    <div class="lec-container">
        <h2>About LEC</h2>
        <p class="lec-section-muted">
            LEC is a handcrafted artisan brand dedicated to creating refined pieces that celebrate tradition, detail,
            and lasting quality. Each bag is thoughtfully made to highlight authentic textures, premium materials, and
            timeless design.
        </p>
    </div>
</section>
<section class="lec-section lec-video">
    <div class="lec-container">
        <div class="lec-video-head">
            <h2>LEC Story</h2>
            <p class="lec-section-muted">A short look into our craft, detail, and handmade process.</p>
        </div>

        <div class="lec-video-wrap">
            <div class="lec-video-inner">
                <video class="lec-video-player" autoplay muted loop playsinline preload="auto">
                    <source src="{% static 'videos/lec-story.mp4' %}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
</section>
<section class="lec-section lec-section-soft">
    <div class="lec-container">
        <h2>How to Order</h2>

        <div class="lec-steps">
            <div class="lec-step">
                <div class="lec-step-num">1</div>
                <h3>Choose your bag</h3>
                <p>Browse the catalog and pick the style you love.</p>
            </div>

            <div class="lec-step">
                <div class="lec-step-num">2</div>
                <h3>Order via WhatsApp</h3>
                <p>Send us your selection directly in WhatsApp.</p>
            </div>

            <div class="lec-step">
                <div class="lec-step-num">3</div>
                <h3>Receive confirmation</h3>
                <p>We confirm availability and arrange delivery.</p>
            </div>
        </div>
    </div>
</section>

<section class="lec-section">
    <div class="lec-container lec-section-head">
        <h2>Featured Bags</h2>
        <a class="lec-link" href="{% url 'catalog' %}">View all</a>
    </div>

    <div class="lec-container">
        {% if featured_products %}
        <div class="lec-grid">
            {% for p in featured_products %}
            <div class="lec-card">

                {% if p.image %}
                <div class="lec-card-media">
                    <img class="lec-card-img" src="{{ p.image.url }}" alt="{{ p.name }}">
                </div>
                {% endif %}
                <div class="product-body">
                    <h3 class="lec-card-title">{{ p.name }}</h3>
                    <p class="lec-price">${{ p.price }}</p>
                    <a class="lec-btn lec-btn-secondary" href="{% url 'product_detail' p.pk %}">View details</a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p class="lec-muted">No featured products yet.</p>
        {% endif %}
    </div>
</section>
<script>
    (function () {
        function forcePlay() {
            const v = document.querySelector(".lec-video-player");
            if (!v) return;

            // asegura atributos
            v.muted = true;
            v.setAttribute("muted", "");
            v.setAttribute("playsinline", "");
            v.setAttribute("autoplay", "");

            // intenta reproducir
            const p = v.play();
            if (p && typeof p.catch === "function") p.catch(() => { });
        }

        // al cargar normal
        document.addEventListener("DOMContentLoaded", forcePlay);

        // cuando regresas a la pestaña/página (back/forward cache)
        window.addEventListener("pageshow", forcePlay);

        // cuando cambias de tab y vuelves
        document.addEventListener("visibilitychange", () => {
            if (!document.hidden) forcePlay();
        });
    })();
</script>
{% endblock %}